<style>
.image-gallery {
  overflow: auto;
  margin-left: -1%!important;
  display: flex;      /* Use flexbox layout */
  flex-wrap: wrap;    /* Allow wrapping of items */
  justify-content: space-around; /* Distribute space around items */
}

.image-gallery a {
  display: block;
  margin: 0.5%; /* This sets margin all around and can be adjusted */
  width: calc(20% - 1%); /* Adjust width to fit 5 items per row, accounting for margin */
  text-align: center;
  text-decoration: none!important;
  overflow: hidden; /* Prevents content from spilling out */
}

.image-gallery a img {
  width: 100%;        /* Full width of the link area */
  height: auto;       /* Maintain aspect ratio */
  aspect-ratio: 1 / 1; /* Makes the image square */
  object-fit: cover;  /* Cover the area of the block, might crop the image */
}
</style>

<div class="image-gallery">
{% for file in site.static_files %}
  {% if file.path contains include.folder %}
    {% if file.extname == '.jpg' or 
      file.extname == '.jpeg' or 
      file.extname == '.JPG' or 
      file.extname == '.JPEG' or
      file.extname == '.png' or
      file.extname == '.PNG' %}

      {% assign filenameparts = file.path | split: "/" %}
      {% assign filename = filenameparts | last | replace: file.extname,"" %}

      <a href="{{ file.path }}" title="{{ filename }}">
        <img src="{{ file.path }}" alt="{{ filename }}" />
      </a>
    {% endif %}
  {% endif %}
{% endfor %}
</div>
